<!DOCTYPE html>
<html>
<head>
    <title>LoL数据分析 - 作业项目</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>英雄联盟数据分析平台</h1>
        <p class="lead">课程作业项目 - PythonAnywhere部署</p>
        
        <div class="alert alert-info">
            <h5>项目说明</h5>
            <p>这是一个简化版部署，使用演示数据避免CPU超额。</p>
            <p>完整代码保留在GitHub仓库中。</p>
        </div>
        
        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">英雄数据</div>
                    <div class="card-body">
                        <table class="table" id="champion-table">
                            <thead><tr><th>英雄</th><th>梯度</th><th>胜率</th></tr></thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">API演示</div>
                    <div class="card-body">
                        <button class="btn btn-primary" onclick="loadFakerData()">
                            查看Faker示例数据
                        </button>
                        <div id="api-result" class="mt-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        async function loadData() {
            const resp = await fetch('/api/data');
            const data = await resp.json();
            
            const table = document.getElementById('champion-table').querySelector('tbody');
            data.champions.forEach(champ => {
                const row = table.insertRow();
                row.innerHTML = `
                    <td>${champ.name}</td>
                    <td><span class="badge bg-primary">${champ.tier}</span></td>
                    <td>${champ.win_rate}%</td>
                `;
            });
        }
        
        async function loadFakerData() {
            const resp = await fetch('/api/demo/faker');
            const data = await resp.json();
            document.getElementById('api-result').innerHTML = `
                <div class="alert alert-success">
                    <h6>${data.name}</h6>
                    <p>战队: ${data.team} | 赛区: ${data.region}</p>
                    <small>${data.demo_note}</small>
                </div>
            `;
        }
        
        loadData();
    </script>
</body>
</html>
